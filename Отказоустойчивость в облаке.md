# 1 Введение
## 1.1 Цель работы: 
развернуть инфраструктуру в Yandex Cloud с использованием Terraform, включающую:

• 2 виртуальные машины с веб-сервером Nginx

• Целевую группу (Target Group) для балансировщика
• Сетевой балансировщик нагрузки (Network Load Balancer)

• HTTP Health Check для мониторинга состояния серверов

# 2 Конфигурация инфраструктуры
## 2.1. Основные компоненты

Инфраструктура создана с использованием следующих ресурсов Yandex Cloud:

• VPC Network (network-1) – виртуальная сеть для размещения ресурсов

• VPC Subnet (subnet-1) – подсеть в зоне ru-central1-a с диапазоном 192.168.10.0/24

• 2 Compute Instance – виртуальные машины web-server-1 и web-server-2 с Ubuntu 22.04 и Nginx

• Target Group (web-target-group) – группа серверов для балансировщика

• Network Load Balancer (web-balancer) – балансировщик с HTTP health check

## 2.2. Terraform конфигурация

В файле main.tf определены все необходимые ресурсы. Ключевые особенности конфигурации:

• Использование count = 2 для создания идентичных виртуальных машин

• Dynamic блок для автоматического добавления VM в целевую группу

• Cloud-init конфигурация для автоматической установки и настройки Nginx

• HTTP health check с интервалом 2 секунды для мониторинга доступности серверов

# 3. Параметры созданных ресурсов
IP адрес балансировщика: 158.160.200.92

Web Server 1:

  • Внешний IP: 89.169.136.126
  
  • Внутренний IP: 192.168.10.34
  
Web Server 2:

  • Внешний IP: 158.160.40.127
  
  • Внутренний IP: 192.168.10.8
  
# 4. Результаты тестирования
## 4.1. Проверка балансировки нагрузки
Выполнена серия из 10 HTTP-запросов к балансировщику для проверки распределения нагрузки между серверами. Результаты показывают, что запросы равномерно распределяются между web-server-1 (fhm69ds560pj1lh0p48v) и web-server-2 (fhm120iscm5hkiceu2of).
<img width="781" height="625" alt="image" src="https://github.com/user-attachments/assets/7e3b076c-d1ee-46cc-84c1-74261261d419" />

Рисунок 4.1. Результаты curl-запросов, демонстрирующие балансировку нагрузки

Как видно на рисунке 4.1, запросы последовательно обрабатываются разными серверами, что подтверждает корректную работу балансировщика нагрузки.

## 4.2. Статус балансировщика в Yandex Cloud Console
В веб-консоли Yandex Cloud балансировщик web-balancer находится в статусе Active, что означает его готовность к обработке трафика.
<img width="781" height="156" alt="image" src="https://github.com/user-attachments/assets/a2ecc161-c2e4-4111-a166-eb814cfdfe82" />

Рисунок 4.2. Статус балансировщика нагрузки в консоли Yandex Cloud

## 4.3. Состояние целевой группы
Целевая группа web-target-group содержит оба веб-сервера. Статус health check показывает, что оба сервера находятся в состоянии Healthy, что означает успешное прохождение HTTP-проверок на порту 80.
<img width="781" height="313" alt="image" src="https://github.com/user-attachments/assets/c5c17da5-cf85-47d6-9642-6f21037ce094" />

Рисунок 4.3. Состояние серверов в целевой группе

## 4.4. Проверка через веб-браузер
При обращении к IP-адресу балансировщика через веб-браузер отображается кастомная HTML-страница, созданная через cloud-init. Страница содержит информацию о текущем сервере, что позволяет визуально убедиться в работе балансировки.

<img width="625" height="391" alt="image" src="https://github.com/user-attachments/assets/7218a201-1f77-4df4-bf44-8e0e564bcc9c" />

Рисунок 4.4. Страница web-server-1 (fhm69ds560pj1lh0p48v)

<img width="625" height="391" alt="image" src="https://github.com/user-attachments/assets/9b5ebce8-0546-4afc-9a5f-9f8eeffb81a7" />

Рисунок 4.5. Страница web-server-2 (fhm120iscm5hkiceu2of)

При обновлении страницы в браузере (F5) отображается попеременно страница от разных серверов, что наглядно демонстрирует работу балансировщика нагрузки.
